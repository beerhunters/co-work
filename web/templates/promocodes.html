{% extends "base.html" %}
{% block title %}Промокоды{% endblock %}
{% block content_title %}Промокоды{% endblock %}
{% block content %}
<style>
    /* Стили для таблицы промокодов */
    .promocode-table {
        font-size: 14px; /* Уменьшенный размер шрифта */
    }
    /* Стили для иконок действий */
    .action-icon {
        font-size: 16px;
        margin: 0 8px;
        cursor: pointer;
        transition: color 0.3s ease;
    }
    .action-icon.view {
        color: #17a2b8; /* Цвет для "Подробно" (info) */
    }
    .action-icon.view:hover {
        color: #117a8b;
    }
    .action-icon.edit {
        color: #ffc107; /* Цвет для "Редактировать" (warning) */
    }
    .action-icon.edit:hover {
        color: #d39e00;
    }
    .action-icon.delete {
        color: #dc3545;
    }
    .action-icon.delete:hover {
        color: #b02a37;
    }
    /* Стили для кнопки "Добавить промокод" */
    .btn-add-promocode {
        font-size: 14px;
        padding: 6px 12px;
    }
</style>
<div class="card">
    <div class="card-header">
        <h3 class="card-title">Список промокодов</h3>
        <div class="card-tools">
            <a href="{{ url_for('new_promocode') }}" class="btn btn-primary btn-add-promocode">
                <i class="fas fa-plus"></i> Добавить промокод
            </a>
        </div>
    </div>
    <div class="card-body">
        <table class="table table-bordered table-hover promocode-table">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Название</th>
                    <th>Скидка (%)</th>
                    <th>Количество использований</th>
                    <th>Дата истечения</th>
                    <th>Активен</th>
                    <th>Действия</th>
                </tr>
            </thead>
            <tbody>
                {% for promocode in promocodes %}
                <tr>
                    <td>{{ promocode.id }}</td>
                    <td>{{ promocode.name }}</td>
                    <td>{{ promocode.discount }}</td>
                    <td>{{ promocode.usage_quantity }}</td>
                    <td>{{ promocode.expiration_date.strftime('%Y-%m-%d %H:%M') if promocode.expiration_date else 'Не указано' }}</td>
                    <td>{{ '✅' if promocode.is_active else '❌' }}</td>
                    <td>
                        <a href="{{ url_for('promocode_detail', promocode_id=promocode.id) }}" class="action-icon view" title="Подробно">
                            <i class="fas fa-eye"></i>
                        </a>
                        <a href="{{ url_for('edit_promocode', promocode_id=promocode.id) }}" class="action-icon edit" title="Редактировать">
                            <i class="fas fa-edit"></i>
                        </a>
                        <form action="{{ url_for('delete_promocode', promocode_id=promocode.id) }}" method="POST" style="display:inline;">
                            <a href="#" class="action-icon delete" title="Удалить" onclick="if(confirm('Вы уверены, что хотите удалить промокод?')){this.parentNode.submit();}return false;">
                                <i class="fas fa-trash"></i>
                            </a>
                        </form>
                    </td>
                </tr>
                {% else %}
                <tr>
                    <td colspan="7">Нет промокодов</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}