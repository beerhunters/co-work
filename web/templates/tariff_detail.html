{% extends "base.html" %}
{% block title %}{% if edit or new %}Редактирование тарифа{% else %}Данные тарифа{% endif %}{% endblock %}
{% block content_title %}{% if edit or new %}Редактирование тарифа{% else %}Данные тарифа{% endif %}{% endblock %}
{% block content %}
<div class="card">
    <div class="card-header">
        <h3 class="card-title">{% if new %}Новый тариф{% else %}Информация о тарифе{% endif %}</h3>
    </div>
    <div class="card-body">
        {% if edit or new %}
        <form method="POST" action="{% if new %}{{ url_for('new_tariff') }}{% else %}{{ url_for('edit_tariff', tariff_id=tariff.id) }}{% endif %}">
        {% else %}
        <div>
        {% endif %}
            <div class="form-group">
                <label>Название</label>
                {% if edit or new %}
                <input type="text" class="form-control" name="name" value="{{ tariff.name or '' }}" required maxlength="64">
                {% else %}
                <p>{{ tariff.name }}</p>
                {% endif %}
            </div>
            <div class="form-group">
                <label>Описание</label>
                {% if edit or new %}
                <textarea class="form-control" name="description" required maxlength="255">{{ tariff.description or 'Описание тарифа' }}</textarea>
                {% else %}
                <p>{{ tariff.description }}</p>
                {% endif %}
            </div>
            <div class="form-group">
                <label>Цена (₽)</label>
                {% if edit or new %}
                <input type="number" step="0.01" class="form-control" name="price" value="{{ tariff.price or '' }}" required min="0">
                {% else %}
                <p>{{ tariff.price }}</p>
                {% endif %}
            </div>
            <div class="form-group">
                <label>Назначение</label>
                {% if edit or new %}
                <select class="form-control" name="purpose">
                    <option value="" {% if not tariff.purpose %}selected{% endif %}>Не указано</option>
                    <option value="Переговорная" {% if tariff.purpose == 'Переговорная' %}selected{% endif %}>Переговорная</option>
                    <option value="Опенспейс" {% if tariff.purpose == 'Опенспейс' %}selected{% endif %}>Опенспейс</option>
                </select>
                {% else %}
                <p>{{ tariff.purpose or 'Не указано' }}</p>
                {% endif %}
            </div>
            <div class="form-group">
                <label>Service ID</label>
                {% if edit or new %}
                <select class="form-control" name="service_id">
                    <option value="" {% if not tariff.service_id %}selected{% endif %}>Не указано</option>
                    <option value="49414" {% if tariff.service_id == 49414 %}selected{% endif %}>Полный день - 49414</option>
                    <option value="47890" {% if tariff.service_id == 47890 %}selected{% endif %}>Тестовый день - 47890</option>
                    <option value="50764" {% if tariff.service_id == 50764 %}selected{% endif %}>Амфитеатр - 50764</option>
                    <option value="47900" {% if tariff.service_id == 47900 %}selected{% endif %}>Большая Переговорная - 47900</option>
                    <option value="47892" {% if tariff.service_id == 47892 %}selected{% endif %}>Нефикс место на месяц - 47892</option>
                    <option value="47894" {% if tariff.service_id == 47894 %}selected{% endif %}>Фикс место на месяц - 47894</option>
                </select>
                {% else %}
                <p>
                    {% if tariff.service_id == 49414 %}Полный день - 49414
                    {% elif tariff.service_id == 47890 %}Тестовый день - 47890
                    {% elif tariff.service_id == 50764 %}Амфитеатр - 50764
                    {% elif tariff.service_id == 47900 %}Большая Переговорная - 47900
                    {% elif tariff.service_id == 47892 %}Нефикс место на месяц - 47892
                    {% elif tariff.service_id == 47894 %}Фикс место на месяц - 47894
                    {% else %}Не указано{% endif %}
                </p>
                {% endif %}
            </div>
            <div class="form-group">
                <label>Активен</label>
                {% if edit or new %}
                <input type="checkbox" name="is_active" {% if tariff.is_active %}checked{% endif %}>
                {% else %}
                <p>{{ '✅' if tariff.is_active else '❌' }}</p>
                {% endif %}
            </div>
            <div class="form-group">
                {% if edit or new %}
                <button type="submit" class="btn btn-primary">
                    <i class="fas fa-save"></i> Сохранить
                </button>
                <a href="{{ url_for('tariffs') }}" class="btn btn-secondary">
                    <i class="fas fa-arrow-left"></i> Назад
                </a>
                {% else %}
                <a href="{{ url_for('edit_tariff', tariff_id=tariff.id) }}" class="btn btn-primary">
                    <i class="fas fa-edit"></i> Редактировать
                </a>
                <form action="{{ url_for('delete_tariff', tariff_id=tariff.id) }}" method="POST" style="display:inline;">
                    <button type="submit" class="btn btn-danger" onclick="return confirm('Вы уверены, что хотите удалить тариф?')">
                        <i class="fas fa-trash"></i> Удалить
                    </button>
                </form>
                <a href="{{ url_for('tariffs') }}" class="btn btn-secondary">
                    <i class="fas fa-arrow-left"></i> Назад
                </a>
                {% endif %}
            </div>
        {% if edit or new %}
        </form>
        {% else %}
        </div>
        {% endif %}
    </div>
</div>
{% endblock %}